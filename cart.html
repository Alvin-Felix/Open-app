<!DOCTYPE html>
<html>
<head>
  <title>Cart</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
  <h2>Your Cart</h2>
  <div id="cartItems"></div>
  <div class="total" id="total"></div>

  <button class="primary-btn" onclick="checkout()">Proceed to Pay</button>
  <a class="link" href="index.html">Back to Shop</a>
</div>

<script>
const products = {
  1: { name: "Idli", price: 10 },
  2: { name: "Dosa", price: 40 }
};

function getCart() {
  return JSON.parse(localStorage.getItem("cart")) || {};
}

function saveCart(cart) {
  localStorage.setItem("cart", JSON.stringify(cart));
}

function renderCart() {
  const cartDiv = document.getElementById("cartItems");
  const totalDiv = document.getElementById("total");
  cartDiv.innerHTML = "";

  const cart = getCart();
  let total = 0;

  for (let id in cart) {
    const item = products[id];
    const qty = cart[id];
    const cost = item.price * qty;
    total += cost;

    const div = document.createElement("div");
    div.className = "cart-item";
    div.innerHTML = `
      <span>${item.name}</span>
      <div>
        <button onclick="decrease(${id})">âˆ’</button>
        <span style="margin: 0 8px;">${qty}</span>
        <button onclick="increase(${id})">+</button>
      </div>
      <span>â‚¹${cost}</span>
    `;
    cartDiv.appendChild(div);
  }

  totalDiv.innerText = `Total: â‚¹${total}`;
}

function increase(id) {
  const cart = getCart();
  cart[id] = (cart[id] || 0) + 1;
  saveCart(cart);
  renderCart();
}

function decrease(id) {
  const cart = getCart();
  if (!cart[id]) return;

  cart[id] -= 1;
  if (cart[id] <= 0) {
    delete cart[id];
  }

  saveCart(cart);
  renderCart();
}

function checkout() {
  const cart = getCart();
  let total = 0;

  for (let id in cart) {
    total += products[id].price * cart[id];
  }

  if (total === 0) {
    alert("Cart is empty");
    return;
  }

  let message = "ðŸ›’ *New Order*%0A%0A";

  for (let id in cart) {
    const item = products[id];
    const qty = cart[id];
    message += `${item.name} x ${qty} = â‚¹${item.price * qty}%0A`;
  }

  message += `%0A*Total:* â‚¹${total}`;

  const phoneNumber = "918754833972";
  const url = `https://wa.me/${phoneNumber}?text=${message}`;

  window.location.href = url;
  localStorage.removeItem("cart");
}

renderCart();
</script>


</body>
</html>


